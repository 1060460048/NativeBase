{"version":3,"sources":["../../../../src/basic/Tabs/index.js"],"names":["React","require","PropTypes","ReactNative","Dimensions","View","Animated","ScrollView","StyleSheet","InteractionManager","Platform","TimerMixin","SceneComponent","DefaultTabBar","ScrollableTabBar","ScrollableTabView","createClass","propTypes","tabBarPosition","oneOf","initialPage","number","page","onChangeTab","func","onScroll","renderTabBar","any","style","contentProps","object","scrollWithoutAnimation","bool","locked","prerenderingSiblingsNumber","mixins","statics","getDefaultProps","getInitialState","currentPage","props","scrollValue","Value","containerWidth","get","width","sceneKeys","newSceneKeys","componentDidMount","scrollFn","scrollView","OS","x","state","scrollTo","animated","setTimeout","runAfterInteractions","componentWillReceiveProps","children","updateSceneKeys","goToPage","pageNumber","offset","y","callback","_onChangeTab","bind","cloneElement","newKeys","previousKeys","setState","_children","forEach","child","idx","key","_makeSceneKey","_keyExists","_shouldRenderSceneKey","push","currentPageKey","numOfSibling","find","sceneKey","heading","renderScrollableContent","scenes","_composeScenes","e","offsetX","nativeEvent","contentOffset","_updateScrollValue","_onMomentumScrollBeginAndEnd","map","Math","round","_updateSelectedPage","nextPage","localNextPage","position","prevPage","i","ref","from","value","setValue","_handleLayout","layout","requestAnimationFrame","Children","render","overlayTabs","tabBarProps","tabs","tabStyle","activeTabStyle","textStyle","activeTextStyle","tabHeaderStyle","undefined","activeTab","tabBarBackgroundColor","backgroundColor","tabBarActiveTextColor","activeTextColor","tabBarInactiveTextColor","inactiveTextColor","tabBarTextStyle","tabBarUnderlineStyle","underlineStyle","left","right","styles","container","module","exports","create","flex","scrollableContentAndroid"],"mappings":"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","file":"index.js","sourcesContent":["import _ from 'lodash';\nconst React = require('react');\n\nconst {\n  PropTypes,\n} = React;\nconst ReactNative = require('react-native');\n\nconst {\n  Dimensions,\n  View,\n  Animated,\n  ScrollView,\n  StyleSheet,\n  InteractionManager,\n  Platform,\n} = ReactNative;\nconst TimerMixin = require('react-timer-mixin');\n\n\nconst SceneComponent = require('./SceneComponent');\nconst { DefaultTabBar } = require('./DefaultTabBar');\nconst { ScrollableTabBar } = require('./ScrollableTabBar');\n\n\nconst ScrollableTabView = React.createClass({\n  propTypes: {\n    tabBarPosition: PropTypes.oneOf(['top', 'bottom', 'overlayTop', 'overlayBottom']),\n    initialPage: PropTypes.number,\n    page: PropTypes.number,\n    onChangeTab: PropTypes.func,\n    onScroll: PropTypes.func,\n    renderTabBar: PropTypes.any,\n    style: View.propTypes.style,\n    contentProps: PropTypes.object,\n    scrollWithoutAnimation: PropTypes.bool,\n    locked: PropTypes.bool,\n    prerenderingSiblingsNumber: PropTypes.number,\n  },\n  mixins: [TimerMixin],\n  statics: {\n    DefaultTabBar,\n    ScrollableTabBar,\n  },\n\n  getDefaultProps() {\n    return {\n      tabBarPosition: 'top',\n      initialPage: 0,\n      page: -1,\n      onChangeTab: () => {},\n      onScroll: () => {},\n      contentProps: {},\n      scrollWithoutAnimation: false,\n      locked: false,\n      prerenderingSiblingsNumber: 0,\n    };\n  },\n\n  getInitialState() {\n    return {\n      currentPage: this.props.initialPage,\n      scrollValue: new Animated.Value(this.props.initialPage),\n      containerWidth: Dimensions.get('window').width,\n      sceneKeys: this.newSceneKeys({ currentPage: this.props.initialPage }),\n    };\n  },\n\n  componentDidMount() {\n    const scrollFn = () => {\n      if (this.scrollView && Platform.OS === 'android') {\n        const x = this.props.initialPage * this.state.containerWidth;\n        this.scrollView.scrollTo({ x, animated: false });\n      }\n    };\n    this.setTimeout(() => {\n      InteractionManager.runAfterInteractions(scrollFn);\n    }, 0);\n  },\n\n  componentWillReceiveProps(props) {\n    if (props.children !== this.props.children) {\n      this.updateSceneKeys({ page: this.state.currentPage, children: props.children });\n    }\n\n    if (props.page >= 0 && props.page !== this.state.currentPage) {\n      this.goToPage(props.page);\n    }\n  },\n\n  goToPage(pageNumber) {\n    const offset = pageNumber * this.state.containerWidth;\n    if (this.scrollView) {\n      this.scrollView.scrollTo({ x: offset, y: 0, animated: !this.props.scrollWithoutAnimation });\n    }\n\n    const currentPage = this.state.currentPage;\n    this.updateSceneKeys({\n      page: pageNumber,\n      callback: this._onChangeTab.bind(this, currentPage, pageNumber),\n    });\n  },\n\n  renderTabBar(props) {\n    if (this.props.renderTabBar === false) {\n      return null;\n    } else if (this.props.renderTabBar) {\n      return React.cloneElement(this.props.renderTabBar(props), props);\n    }\n    return <DefaultTabBar {...props} />;\n  },\n\n  updateSceneKeys({ page, children = this.props.children, callback = () => {} }) {\n    const newKeys = this.newSceneKeys({\n      previousKeys: this.state.sceneKeys,\n      currentPage: page,\n      children });\n    this.setState({ currentPage: page, sceneKeys: newKeys }, callback);\n  },\n\n  newSceneKeys({ previousKeys = [], currentPage = 0, children = this.props.children }) {\n    const newKeys = [];\n    this._children(children).forEach((child, idx) => {\n      let key = this._makeSceneKey(child, idx);\n      if (this._keyExists(previousKeys, key) ||\n        this._shouldRenderSceneKey(idx, currentPage)) {\n        newKeys.push(key);\n      }\n    });\n    return newKeys;\n  },\n\n  _shouldRenderSceneKey(idx, currentPageKey) {\n    const numOfSibling = this.props.prerenderingSiblingsNumber;\n    return (idx < (currentPageKey + numOfSibling + 1) &&\n      idx > (currentPageKey - numOfSibling - 1));\n  },\n\n  _keyExists(sceneKeys, key) {\n    return sceneKeys.find(sceneKey => key === sceneKey);\n  },\n\n  _makeSceneKey(child, idx) {\n    return `${child.props.heading}_${idx}`;\n  },\n\n  renderScrollableContent() {\n    const scenes = this._composeScenes();\n    return <ScrollView\n      horizontal\n      pagingEnabled\n      automaticallyAdjustContentInsets={false}\n      contentOffset={{ x: this.props.initialPage * this.state.containerWidth, }}\n      ref={(scrollView) => { this.scrollView = scrollView; }}\n      onScroll={(e) => {\n        const offsetX = e.nativeEvent.contentOffset.x;\n        this._updateScrollValue(offsetX / this.state.containerWidth);\n      }}\n      onMomentumScrollBegin={this._onMomentumScrollBeginAndEnd}\n      onMomentumScrollEnd={this._onMomentumScrollBeginAndEnd}\n      scrollEventThrottle={16}\n      scrollsToTop={false}\n      showsHorizontalScrollIndicator={false}\n      scrollEnabled={!this.props.locked}\n      directionalLockEnabled\n      alwaysBounceVertical={false}\n      keyboardDismissMode=\"on-drag\"\n      {...this.props.contentProps}\n    >\n      {scenes}\n    </ScrollView>;\n  },\n\n  _composeScenes() {\n    return this._children().map((child, idx) => {\n      const key = this._makeSceneKey(child, idx);\n      return (<SceneComponent\n        key={child.key}\n        shouldUpdated={this._shouldRenderSceneKey(idx, this.state.currentPage)}\n        style={{ width: this.state.containerWidth }}\n      >\n        {this._keyExists(this.state.sceneKeys, key) ?\n          child : <View heading={child.props.heading} />}\n      </SceneComponent>);\n    });\n  },\n\n  _onMomentumScrollBeginAndEnd(e) {\n    const offsetX = e.nativeEvent.contentOffset.x;\n    const page = Math.round(offsetX / this.state.containerWidth);\n    if (this.state.currentPage !== page) {\n      this._updateSelectedPage(page);\n    }\n  },\n\n  _updateSelectedPage(nextPage) {\n    let localNextPage = nextPage;\n    if (typeof localNextPage === 'object') {\n      localNextPage = nextPage.nativeEvent.position;\n    }\n\n    const currentPage = this.state.currentPage;\n    this.updateSceneKeys({\n      page: localNextPage,\n      callback: this._onChangeTab.bind(this, currentPage, localNextPage),\n    });\n  },\n\n  _onChangeTab(prevPage, currentPage) {\n    this.props.onChangeTab({\n      i: currentPage,\n      ref: this._children()[currentPage],\n      from: prevPage,\n    });\n  },\n\n  _updateScrollValue(value) {\n    this.state.scrollValue.setValue(value);\n    this.props.onScroll(value);\n  },\n\n  _handleLayout(e) {\n    const { width } = e.nativeEvent.layout;\n\n    if (Math.round(width) !== Math.round(this.state.containerWidth)) {\n      this.setState({ containerWidth: width });\n      this.requestAnimationFrame(() => {\n        this.goToPage(this.state.currentPage);\n      });\n    }\n  },\n\n  _children(children = this.props.children) {\n    return React.Children.map(children, child => child);\n  },\n\n  render() {\n    const overlayTabs = (this.props.tabBarPosition === 'overlayTop' || this.props.tabBarPosition === 'overlayBottom');\n    const tabBarProps = {\n      goToPage: this.goToPage,\n      tabs: this._children().map(child => child.props.heading),\n      tabStyle: this._children().map(child => child.props.tabStyle),\n      activeTabStyle: this._children().map(child => child.props.activeTabStyle),\n      textStyle: this._children().map(child => child.props.textStyle),\n      activeTextStyle: this._children().map(child => child.props.activeTextStyle),\n      tabHeaderStyle: this._children().map(child => _.get(child.props.heading.props, 'style', undefined)),\n      activeTab: this.state.currentPage,\n      scrollValue: this.state.scrollValue,\n      containerWidth: this.state.containerWidth,\n    };\n\n    if (this.props.tabBarBackgroundColor) {\n      tabBarProps.backgroundColor = this.props.tabBarBackgroundColor;\n    }\n    if (this.props.tabBarActiveTextColor) {\n      tabBarProps.activeTextColor = this.props.tabBarActiveTextColor;\n    }\n    if (this.props.tabBarInactiveTextColor) {\n      tabBarProps.inactiveTextColor = this.props.tabBarInactiveTextColor;\n    }\n    if (this.props.tabBarTextStyle) {\n      tabBarProps.textStyle = this.props.tabBarTextStyle;\n    }\n    if (this.props.tabBarUnderlineStyle) {\n      tabBarProps.underlineStyle = this.props.tabBarUnderlineStyle;\n    }\n    if (overlayTabs) {\n      tabBarProps.style = {\n        position: 'absolute',\n        left: 0,\n        right: 0,\n        [this.props.tabBarPosition === 'overlayTop' ? 'top' : 'bottom']: 0,\n      };\n    }\n\n    return (<View style={[styles.container, this.props.style]} onLayout={this._handleLayout}>\n      {this.props.tabBarPosition === 'top' && this.renderTabBar(tabBarProps)}\n      {this.renderScrollableContent()}\n      {(this.props.tabBarPosition === 'bottom' || overlayTabs) && this.renderTabBar(tabBarProps)}\n    </View>);\n  },\n});\n\nmodule.exports = ScrollableTabView;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  scrollableContentAndroid: {\n    flex: 1,\n  },\n});\n"]}