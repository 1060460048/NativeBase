{"version":3,"sources":["../../../../src/backward/Widgets/CardSwiper.js"],"names":["SWIPE_THRESHOLD","CardSwiper","props","state","pan","ValueXY","enter","Value","_animateEntrance","spring","toValue","friction","start","_panResponder","create","onMoveShouldSetResponderCapture","onMoveShouldSetPanResponderCapture","onPanResponderGrant","setOffset","x","_value","y","setValue","onPanResponderMove","event","dx","dy","onPanResponderRelease","e","vx","vy","flattenOffset","velocity","Math","abs","onSwipeRight","onSwipeLeft","decay","deceleration","_resetState","bind","translateX","translateY","rotate","interpolate","inputRange","outputRange","opacity","scale","animatedCardStyles","transform","c","_root","panHandlers","children"],"mappings":"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","file":"CardSwiper.js","sourcesContent":["/* @flow */\n\nimport React from 'react';\nimport clamp from 'clamp';\nimport { Animated, PanResponder } from 'react-native';\nimport NativeBaseComponent from '../Base/NativeBaseComponent';\nimport { View } from './View';\n\n\nconst SWIPE_THRESHOLD = 120;\n\nexport default class CardSwiper extends NativeBaseComponent {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      pan: new Animated.ValueXY(),\n      enter: new Animated.Value(0.5),\n    };\n  }\n\n  componentDidMount() {\n    this._animateEntrance();\n  }\n\n  _animateEntrance() {\n    Animated.spring(\n            this.state.enter,\n            { toValue: 1, friction: 8 }\n        ).start();\n  }\n\n  componentWillMount() {\n    this._panResponder = PanResponder.create({\n      onMoveShouldSetResponderCapture: () => true,\n      onMoveShouldSetPanResponderCapture: () => true,\n\n      onPanResponderGrant: () => {\n        this.state.pan.setOffset({ x: this.state.pan.x._value, y: this.state.pan.y._value });\n        this.state.pan.setValue({ x: 0, y: 0 });\n      },\n\n      onPanResponderMove: Animated.event([\n        null, { dx: this.state.pan.x, dy: this.state.pan.y },\n      ]),\n\n      onPanResponderRelease: (e, { vx, vy }) => {\n        this.state.pan.flattenOffset();\n        let velocity;\n\n        if (vx >= 0) {\n          velocity = clamp(vx, 3, 5);\n        } else if (vx < 0) {\n          velocity = clamp(vx * -1, 3, 5) * -1;\n        }\n\n        if (Math.abs(this.state.pan.x._value) > SWIPE_THRESHOLD) {\n          if (velocity > 0) {\n            this.props.onSwipeRight();\n          } else {\n            this.props.onSwipeLeft();\n          }\n          Animated.decay(this.state.pan, {\n            velocity: { x: velocity, y: vy },\n            deceleration: 0.98,\n          }).start(this._resetState.bind(this));\n        } else {\n          Animated.spring(this.state.pan, {\n            toValue: { x: 0, y: 0 },\n            friction: 4,\n          }).start();\n        }\n      },\n    });\n  }\n\n  _resetState() {\n    this.state.pan.setValue({ x: 0, y: 0 });\n    this.state.enter.setValue(0);\n    this._animateEntrance();\n  }\n\n  render() {\n    const { pan, enter } = this.state;\n\n    const [translateX, translateY] = [pan.x, pan.y];\n\n    const rotate = pan.x.interpolate({ inputRange: [-300, 0, 300], outputRange: ['-30deg', '0deg', '30deg'] });\n    const opacity = pan.x.interpolate({ inputRange: [-150, 0, 150], outputRange: [0.5, 1, 0.5] });\n    const scale = enter;\n\n    const animatedCardStyles = {\n      transform: [{ translateX }, { translateY }, { rotate }, { scale }], opacity };\n\n\n    return (\n      <View ref={(c) => { this._root = c; }}>\n        <Animated.View style={animatedCardStyles} {...this._panResponder.panHandlers} >\n          {this.props.children}\n        </Animated.View>\n      </View>\n    );\n  }\n\n}\n"]}