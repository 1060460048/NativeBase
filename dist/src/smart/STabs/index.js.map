{"version":3,"sources":["../../../../src/smart/STabs/index.js"],"names":["STabs","tabBarPosition","initialPage","page","locked","onChangeTab","onScroll","scrollWithoutAnimation","props","currentPage","state","scrollValue","Value","containerWidth","get","width","goToPage","value","setValue","tabContent","map","child","idx","prevPage","i","ref","from","children","callback","newKeys","setState","sceneKeys","pageNumber","OS","offset","scrollView","scrollTo","x","y","animated","setPageWithoutAnimation","setPage","contentKey","tabChange","bind","Children","content","getContent","e","offsetX","nativeEvent","contentOffset","getScrollValue","flex","position","renderTabBar","cloneElement","vertical","tabBarProps","tabs","tabLabel","tabIcon","activeTab","iconPresent","tabBarTextStyle","tabBarIconStyle","tabBarUnderlineColor","underlineStyle","tabBarStyle","c","_root","renderTab","renderContent","bottom","propTypes","style","PropTypes","object","number","string","bool","StyledSTabs"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport { View, Animated, Dimensions, ScrollView, Platform, ViewPagerAndroid } from 'react-native';\nimport { connectStyle } from 'native-base-shoutem-theme';\nimport mapPropsToStyleNames from '../../Utils/mapPropsToStyleNames';\n\nimport { TabBar } from './TabBar';\n\nclass STabs extends Component {\n\n  static get defaultProps() {\n    return {\n      tabBarPosition: 'top',\n      initialPage: 0,\n      page: -1,\n      locked: true,\n      onChangeTab: () => {},\n      onScroll: () => {},\n      scrollWithoutAnimation: false,\n    };\n  }\n\n  constructor(props) {\n    super(props);\n    const currentPage = (this.props.initialPage) ? this.props.initialPage : 0;\n    this.state = {\n      scrollValue: new Animated.Value(this.props.initialPage),\n      containerWidth: Dimensions.get('window').width,\n      currentPage,\n    };\n  }\n  componentWillReceiveProps(props) {\n    if (props.page >= 0 && props.page !== this.state.currentPage) {\n      this.goToPage(props.page);\n    }\n  }\n\n  getScrollValue(value) {\n    this.state.scrollValue.setValue(value);\n    this.props.onScroll(value);\n  }\n\n  getContent() {\n    return this.tabContent().map((child, idx) => <View\n      key={idx}\n      style={{ width: this.state.containerWidth }}\n    >\n      {child}\n    </View>);\n  }\n  tabChange(prevPage, currentPage) {\n    this.props.onChangeTab({\n      i: currentPage,\n      ref: this.tabContent()[currentPage],\n      from: prevPage,\n    });\n  }\n\n  contentKey({ page, children = this.props.children, callback = () => {} }) {\n    const newKeys = page;\n    this.setState({ currentPage: page, sceneKeys: newKeys }, callback);\n  }\n  goToPage(pageNumber) {\n    if (Platform.OS === 'ios') {\n      const offset = pageNumber * this.state.containerWidth;\n      if (this.scrollView) {\n        this.scrollView.scrollTo({ x: offset, y: 0, animated: !this.props.scrollWithoutAnimation });\n      }\n    } else if (this.scrollView) {\n      if (this.props.scrollWithoutAnimation) {\n        this.scrollView.setPageWithoutAnimation(pageNumber);\n      } else {\n        this.scrollView.setPage(pageNumber);\n      }\n    }\n\n    const currentPage = this.state.currentPage;\n    this.contentKey({\n      page: pageNumber,\n      callback: this.tabChange.bind(this, currentPage, pageNumber),\n    });\n  }\n\n  tabContent() {\n    return React.Children.map(this.props.children, child => child);\n  }\n  renderContent() {\n    const content = this.getContent();\n    if (Platform.OS === 'ios') {\n      return (<ScrollView\n        horizontal\n        pagingEnabled\n        automaticallyAdjustContentInsets={false}\n        contentOffset={{ x: this.props.initialPage * this.state.containerWidth }}\n        ref={(scrollView) => { this.scrollView = scrollView; }}\n        onScroll={(e) => {\n          const offsetX = e.nativeEvent.contentOffset.x;\n          this.getScrollValue(offsetX / this.state.containerWidth);\n        }}\n        scrollEventThrottle={16}\n        scrollsToTop={false}\n        showsHorizontalScrollIndicator={false}\n        scrollEnabled={!this.props.locked}\n        directionalLockEnabled\n        alwaysBounceVertical={false}\n      >\n        {content}\n      </ScrollView>);\n    }\n    return (<ViewPagerAndroid\n      style={{ flex: 1 }}\n      initialPage={this.props.initialPage}\n      scrollEnabled={!this.props.locked}\n      onPageScroll={(e) => {\n        const { offset, position } = e.nativeEvent;\n        this.getScrollValue(position + offset);\n      }}\n      ref={(scrollView) => { this.scrollView = scrollView; }}\n    >\n      {content}\n    </ViewPagerAndroid>);\n  }\n\n  renderTab(props) {\n    if (this.props.renderTabBar === false) {\n      return null;\n    } else if (this.props.renderTabBar) {\n      return React.cloneElement(this.props.renderTabBar(props), props);\n    }\n    return <TabBar {...props} vertical={this.props.vertical} />;\n  }\n\n  render() {\n    const tabBarProps = {\n      goToPage: this.goToPage.bind(this),\n      tabs: this.props.children.map(child => child.props.tabLabel),\n      tabIcon: this.props.children.map(child => child.props.tabIcon),\n      activeTab: this.state.currentPage,\n      iconPresent: (this.props.children[0].props.tabIcon) ? true : false,\n      tabBarTextStyle: this.props.tabBarTextStyle,\n      tabBarIconStyle: this.props.tabBarIconStyle,\n      tabBarUnderlineColor: this.props.tabBarUnderlineColor,\n      underlineStyle: this.props.underlineStyle,\n      tabBarStyle: this.props.tabBarStyle,\n      scrollValue: this.state.scrollValue,\n    };\n\n    return (\n      <View ref={(c) => { this._root = c; }} {...this.props}>\n        {this.props.tabBarPosition === 'top' && this.renderTab(tabBarProps)}\n        {this.renderContent()}\n        <View style={(this.props.tabBarPosition === 'bottom') ? { bottom: (Platform.OS === 'ios') ? 0 : 23 } : {}}>\n          {this.props.tabBarPosition === 'bottom' && this.renderTab(tabBarProps)}\n        </View>\n      </View>\n    );\n  }\n}\n\nSTabs.propTypes = {\n  ...View.propTypes,\n  style: React.PropTypes.object,\n  initialPage: React.PropTypes.number,\n  tabBarPosition: React.PropTypes.string,\n  tabBarTextStyle: React.PropTypes.object,\n  tabBarIconStyle: React.PropTypes.object,\n  tabBarStyle: React.PropTypes.object,\n  underlineStyle: React.PropTypes.object,\n  vertical: React.PropTypes.bool,\n};\n\nconst StyledSTabs = connectStyle('NativeBase.STabs', {}, mapPropsToStyleNames)(STabs);\n\nexport {\n  StyledSTabs as STabs,\n};\n"]}